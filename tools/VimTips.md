# vim进阶技巧

## 基本操作

- 如何用比较文本？`vim -d a.txt b.txt`

  > d的含义为difference，也可以使用`diff a.txt b.txt`

- 如何在行首插入？`I`

- 如何在行尾插入？`A`

- 当你写入的行有缩进时，如何在当前行缩进地方插入？`S`

- 如果进行单词间的光标跳转？`w或e或b`

  > w表示word，e表示单词的end，b表示单词begin
  >
  > 也可以结合数字，比如`5w` `4e` `3b`

- 如何切换历史光标？`<C-o>或者<C-i>`

  > 可以跨文件

- 如何关闭当前`tabe`？`:tabc`

  > :表示命令模式

- 如何切换`tabe`?`:tabp或者:tabn`

- 如何快速接换到第`2`个标签？`2gt`

- 如何在连续的行内，同一列插入一样的内容?`ctrl v进入VISUAL BLOCK模式，选中某列，shift i后写入内容，最后按ESC生效`

- 如何避免单词打错?`set spell开启拼写检查`

- 如何进行单词补全？`z=`

- 如何根据路径跳转到这个文件?`gf`

- 如何查看某个字符的ASCII码？`ga`

- `vim`没有`sudo`权限，如何强制写入？`w !sudo tee %`

  > w表示write，相当于把当前write内容通过管道让tee命令强制写入，!表示vim外部命令，%表示当前文件

- 如何把文件中所有的`printf("hello");`改成`cout << "hello" << endl;`？`:%s/printf("\(.*\)");/cout << "\1" << endl;/g`

  > %表示当前文件，%s表示替换整个文件，如何替换当前行使用s就行
  >
  > 其中\(\)表示子表达式，\1是反向引用，\1是第一个子表达式，同理\2是第二个子表达式，可以理解为()表示捕获字符串，\1表示提取第一个捕获的字符串组
  >
  > /g表示替换本行的全部匹配项，如果不加，则只处理第一次匹配到的项

- 有时可视区域不够宽，而一行的字符有很多，导致了 wrap。那么通过`j或k` 是无法直观的定位到同一物理行，却不在同一个可视行里的位置，那么如何定位到可视行呢？`gj或者gk`

- 如何重复上一次的`f`查找操作？`;`

- 如何重复上一次的操作？`.`

  > . 用的好有奇效

- 如何通过vim查看ls命令行的输出?`ls | vim -`

  > 再也不用担心终端不能翻页了！！！

- 当输入路径时，如何补全路路径？`<C-x-f>`

- 光标下的数字如何自增自减？`<C-a> 和 <C-x>`

  > 也可以结合数字 `5<C-a>`表示增加5，`5g<C-a>`让所有行递增 

- 怎么把100行的内容拼接成1行？`VISVAL模式选中所有行，输入J就会把所有行用空格拼接`

- 当你想输入一个数组序列从0到100，怎么能快速输入？

  ```bash
  int arr = {
  for i in `seq 0 100`;
  do
    echo $i
  done
  };
  ```

  > visual模式选中bash脚本（也可以是python或者其他），输入`!bash`会生成0到100的序列，然后使用J把所有内容用空格拼接成1行，再输入`:s/ /,/g`把当前行的空格替换成逗号

* 怎么替换整行字符，变成`=`?`Vr=`

  > 在添加分割线的时候很好用，也可以用`<n>i=`然后`esc`退出，其中`<n>`表示需要多少个`=`字符

* 怎么删除所有#开头的行？

  > 搜索^#回车，然后输入`:g//d`，如果是要移动到末尾`:g//m$`，移动到开头`:g//m0`

- 如何替换字符串`VimInHardWay`变成`v_VimInHardWay`？

  > 命令模式输入`%s/MetadataReader/v_MetadataReader/g`，如果你嫌弃`VimInHardWay`太长不想第二次输入，可以用&代替，`%s/MetadataReader/v_&/g`

- 如何同时搜索两个单词？比如`good`和`bad`，并将这些单词后加上`_select`。

  > 输入`/good\|bad`回车，命令模式输入`:%s//&_select`

- 如何快速缩进一个段落？`>}或者>{`

* 当你搜索到内容时，只想保留搜索到的项，删除其他内容怎么办？

  > 比如搜索good | bad，然后命令模式输入`:vglobal//d`就会删除其他不匹配的行，`vglobal/vg`选中的是`global/g`的相反内容

- 如果刚刚使用了一个很长的命令，然后想要修改怎么办？

  > `q/`进入命令行窗口，然后修改就可以了，回车就会执行

* 如何在`visual`模式中修改另一个方向的范围？`o`

- 当你忘记目录层级和目录名，但是知道文件名，怎么打开这个文件？`:e **/test.txt`

- 如何回退到5秒钟前的buffer？`earlier 5s`

- 如何在插入模式中删除整行？`<C-u>`

- 如何在插入模式中删除一个单词？`<C-w>`

- 如何在插入模式中插入一个不常见的字符比如`¿ `？

  > 只要知道它Unicode编码，在插入模式输入<C-v>u00bf

## 标记mark

- 如何设置当前文件标记？`ma(名称为a,也可以mb mc...)`

- 如何设置跨文件标记？`mA(名称为A,也可以mB mC...)`

- 如何定位到标记`a`处？``a`
- 如何定位到标记`a`处的行首？`'a`
- 如何显示所有的标记？`:marks`
- 如何删除指定的标记？`:delmarks`

## 寄存器reg

- 如何复制当前行到寄存器`a`？`"ayy(寄存器名也可以是a b c...)`
- 如何粘贴寄存器`a`的内容到当前行？`"ap`
- 如何查看寄存器`a`的内容？`:reg a`

> ""表示无名寄存器
